{
    "$schema": "https://railway.app/railway.schema.json",
    "build": {
        "builder": "NIXPACKS",
        "nixpacksConfig": {
        "providers": ["php"],
        "install": {
            "cmd": "composer install --no-dev --no-progress --optimize-autoloader && npm ci"
        },
        "build": {
            "cmd": "npm run build"
        },
        "start": {
            "cmd": "sleep infinity"
        }
        }
    },
    "deploy": {
        "healthcheckTimeout": 120,
        "restartPolicyType": "ON_FAILURE",
        "restartPolicyMaxRetries": 10
    }
}